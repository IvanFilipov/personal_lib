## Как да инсталираме и използваме този скрипт

### Първи стъпки (как да започнем):

0. Инсталирайте си python3 и pip3:
* под `WIN`  - не забравайте да ги добавите към `PATH`.
* под `*NIX` - може би вече ги имате инсталирани.
* Уверете се, че работят:
	* `$python3 --version`
	* **Забележка под `*WIN` може би е:**<br>
	`$py -3 --version`<br>
	* *Това си е така на всички платформи:*<br>
	  `$pip3 --version`
1. Вземете си кода (от [GitHub](https://github.com/IvanFilipov/personal_lib/tree/master/scripts/hw_unzipper)):
* Трябват ви и двата файла:
	* `hw_unzipper.py`
	* `requirements.txt`
* Съхранете ги в директория по ваш избор, за по-крато оттук нататък ще я наричаме "*работната директория*".

### Настройваме си Гугълските права:

2. Отидете [тук](https://developers.google.com/sheets/api/quickstart/python).

**Важно: използвайте същия профил, с който имате права за общата таблица на курса!**

3. Натиснте бутона "_Enable the Google Sheets API_".
- Наименувайте проекта както пожелаете, натиснете "_YES_", след това "_NEXT_".
- В отворилия се прозорец изберете "_DOWNLOAD CLIENT CONFIGURATION_" и запазете файла в **същата** директория, в която сте съхранили скрипта.

### Инсталираме си зависимостите на скрипта:

- От "*работната директория*" (там където запазихте файловете) изпълнете просто:<br>
`$pip3 install -r requirements.txt`

### Пускаме скрипта за първи път:

4. Направете си празен _zip_ архив с име "*C432267-Леко домашно 1-128890.zip*" или още по-лесно, направо си го свалете от *moodle* (подробно описание по-долу).

5. От "*работната директория*" пуснете скрипта:
* `$python3 hw_unzipper.py <името_на_архива>`
    * Тук `<името_на_архива>` (лекичко) зависи от операционната ви система,<br> затова напишете просто `"C" + tab`. След като се изписало цялото име, ударете смело `Enter`.

6. Ами сега?!
* Най-вероятно се е отворил браузерът ви по подразбиране, не се плашете, това се случва **само** първия път. Сега от браузера:
	- Изберете си *профила* (онзи същия, с който имате права за таблицата).
	- Ще ви каже, че това приложение не е верифицирано, затова:
	  - Кликнете на "*Advanced*" (някъде най-долу е).
	  - Ще ви се отвори нова опция - "*Go to <project_name> (unsafe)*", изберете я.
	  - Би трябвало да се появи ново Гугълско меню,натиснете "*Allow*".
	  - Ако всичко е наред "*The authentication flow has completed...*" ще се изпише в браузера ви. Можете да затворите "табчето".

	- Върнете се обратно в командния ред. Не би трябвало да има съобщения за грешки. Би трябвало в "*работната директория*" да се е създала поддиректория с името "*01_hw_easy_check*", ако е така, то **всичко** бачка!!! Вземете си кафенце и можете да започнете с проверяването :computer:.

### Използваме скрипта пълноценно:

7. Какво да правим/следим в общата таблица:
- Уверете се, че сте маркирали хората, които ще проверявате с **вашия** си цвят.
- Проверете дали за конкретното домашно най-долу в реда "краен срок" има дата и час. Ако няма, моля, добавете в същия формат както са изписани вече същестуващите записи.

8. Какво да правим в moodle:
- Изберете домашното, което се гласите да проверявате.
- Натиснете "*Преглед/оценяване на всички предадени задания*"
- От падащото меню "*Действие оценяване*" изберете "*Изтегляне на всички задания*".
- Запазете си файла, където си пожелаете.

9. Как да пускаме скрипта:
- **ВАЖНО: на ред 52 в скрипта сменете името с вашето, така както е изписано в общата таблица!**
- Ако пуснете скрипта без параметри:
  - `$python3 hw_unzipper.py`<br>
  той ще ви изведе формата на аргументите си. Нещо такова:
  ```
	usage: hw_unzipper.py hw_archive [out_dir]

	positional arguments:
 	hw_archive   zip file with all homeworks
                     Notice: download it from Moodle.

	optional arguments:
 	out_dir      where to output the result
           	     Default: The output will be save in the same
                       directory from where the script has been run.
                     Notice:  in this direcory a subdirectory called <hw_num>_hw_<easy|hard>_check
                       will be created.
  ```
- Стартирайте го с параметър пътя до изтегления от вас архив. Пример:
   - `$python3 hw_unzipper.py C432267-Леко\ домашно\ 1-128890.zip`
- Изходът (ако няма грешки) ще бъде поддиректория на "*работната*" с името "*01_hw_easy_check*" (или подобна, зависи от домашното).
- В тази поддиректория, ще имате директори за всеки от судентите, на които трябва да проверявате.
    - примерно "*01_hw_easy_check/45031_Иван_Филипов/*"
- Във всяка такава директория, ще намерите всички файлове, качени от студента.
- Също така, обърнете внимание, че може да има файл с име "*flags.txt*", там ще пише, кой файл е предаден **след** крайния срок и с колко минути закъснение.

- Може да пускате скрипта и с желана от вас изходна директория. Например:
  - `$python3 hw_unzipper.py C432267-Леко\ домашно\ 1-128890.zip ../out_dir`
  - Тогава целия изход ще се намира в "*../out_dir/01_hw_easy_check/*".

### Размисли на автора:
- Не се тревожете, че със скрипта ще ви открадна данните и информацията на дебитните карти :japanese_ogre:.<br> Доколкото ми е известно, скриптът не създава никакви пролуки в сигурността на профилите ви, но все пак се разграничавам от това да ви дам 100% гаранция.
- Пишете ми смело при проблеми с подкарването, бъгове и подобни :sunglasses:.
- Засега е тестван на 3 машини (2xUbuntu 18.04 и 1xWindows 7). Пишете ми ако върви при вас на различна платформа :mortar_board:.
- Надявам се скриптът да ни помогне да си оптимизираме нелеката задача с множеството проверки :wink:.
- Ако ви е свършил работа, то, моля, не се притеснявайте да ме черпите :coffee: или :beer:.


